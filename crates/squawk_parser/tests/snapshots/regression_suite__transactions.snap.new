---
source: crates/squawk_parser/tests/regression_suite.rs
assertion_line: 87
input_file: crates/squawk_parser/tests/data/regression_suite/transactions.sql
---
SOURCE_FILE
  COMMENT "--"
  WHITESPACE "\n"
  COMMENT "-- TRANSACTIONS"
  WHITESPACE "\n"
  COMMENT "--"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "xacttest"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                SMALLINT_KW "smallint"
      COMMA ","
      WHITESPACE " "
      COLUMN
        NAME_REF
          IDENT "b"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                REAL_KW "real"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "xacttest"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE "\n  "
      L_PAREN "("
      LITERAL
        INT_NUMBER "56"
      COMMA ","
      WHITESPACE " "
      LITERAL
        FLOAT_NUMBER "7.8"
      R_PAREN ")"
      COMMA ","
      WHITESPACE "\n  "
      L_PAREN "("
      LITERAL
        INT_NUMBER "100"
      COMMA ","
      WHITESPACE " "
      LITERAL
        FLOAT_NUMBER "99.097"
      R_PAREN ")"
      COMMA ","
      WHITESPACE "\n  "
      L_PAREN "("
      LITERAL
        INT_NUMBER "0"
      COMMA ","
      WHITESPACE " "
      LITERAL
        FLOAT_NUMBER "0.09561"
      R_PAREN ")"
      COMMA ","
      WHITESPACE "\n  "
      L_PAREN "("
      LITERAL
        INT_NUMBER "42"
      COMMA ","
      WHITESPACE " "
      LITERAL
        FLOAT_NUMBER "324.78"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "xacttest"
    WHITESPACE " "
    COLUMN_LIST
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
      COMMA ","
      WHITESPACE " "
      COLUMN
        NAME_REF
          IDENT "b"
      R_PAREN ")"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "777"
      COMMA ","
      WHITESPACE " "
      LITERAL
        FLOAT_NUMBER "777.777"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMIT_STMT
    END_KW "END"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- should retrieve one value--"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          NAME_REF
            IDENT "a"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BIN_EXPR
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        R_ANGLE ">"
        WHITESPACE " "
        LITERAL
          INT_NUMBER "100"
  SEMICOLON ";"
  WHITESPACE "\n\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "disappear"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                IDENT "int4"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  DELETE_STMT
    DELETE_KW "DELETE"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- should be empty"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  ROLLBACK_STMT
    ABORT_KW "ABORT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- should not exist"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          NAME_REF
            IDENT "oid"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "pg_class"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BIN_EXPR
        NAME_REF
          IDENT "relname"
        WHITESPACE " "
        EQ "="
        WHITESPACE " "
        LITERAL
          STRING "'disappear'"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- should have members again"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- Test that transaction characteristics cannot be reset."
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    SERIALIZABLE_KW "SERIALIZABLE"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          CALL_EXPR
            NAME_REF
              IDENT "COUNT"
            ARG_LIST
              L_PAREN "("
              STAR "*"
              R_PAREN ")"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n"
  RESET_STMT
    RESET_KW "RESET"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- error"
  WHITESPACE "\n"
  COMMIT_STMT
    END_KW "END"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          CALL_EXPR
            NAME_REF
              IDENT "COUNT"
            ARG_LIST
              L_PAREN "("
              STAR "*"
              R_PAREN ")"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n"
  RESET_STMT
    RESET_KW "RESET"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- error"
  WHITESPACE "\n"
  COMMIT_STMT
    END_KW "END"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    DEFERRABLE_KW "DEFERRABLE"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          CALL_EXPR
            NAME_REF
              IDENT "COUNT"
            ARG_LIST
              L_PAREN "("
              STAR "*"
              R_PAREN ")"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n"
  RESET_STMT
    RESET_KW "RESET"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- error"
  WHITESPACE "\n"
  COMMIT_STMT
    END_KW "END"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  CREATE_FUNCTION_STMT
    CREATE_KW "CREATE"
    WHITESPACE " "
    FUNCTION_KW "FUNCTION"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "errfunc"
    PARAM_LIST
      L_PAREN "("
      R_PAREN ")"
    WHITESPACE " "
    RET_TYPE
      RETURNS_KW "RETURNS"
      WHITESPACE " "
      PATH_TYPE
        PATH
          PATH_SEGMENT
            NAME_REF
              INT_KW "int"
    WHITESPACE " "
    FUNC_OPTION_LIST
      LANGUAGE_FUNC_OPTION
        LANGUAGE_KW "LANGUAGE"
        WHITESPACE " "
        SQL_KW "SQL"
      WHITESPACE " "
      AS_FUNC_OPTION
        AS_KW "AS"
        WHITESPACE " "
        LITERAL
          STRING "'SELECT 1'"
      WHITESPACE "\n"
      SET_FUNC_OPTION
        SET_KW "SET"
        WHITESPACE " "
        PATH
          PATH_SEGMENT
            NAME_REF
              IDENT "transaction_read_only"
        WHITESPACE " "
        EQ "="
  WHITESPACE " "
  ERROR
    ON_KW "on"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- error"
  WHITESPACE "\n\n"
  COMMENT "-- Read-only tests"
  WHITESPACE "\n\n"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "writetest"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TEMPORARY_KW "TEMPORARY"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "temptest"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    SERIALIZABLE_KW "SERIALIZABLE"
    COMMA ","
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
    COMMA ","
    WHITESPACE " "
    DEFERRABLE_KW "DEFERRABLE"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "writetest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "--fail"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "writetest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "writetest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "--fail"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "writetest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "--fail"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "writetest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- off"
  WHITESPACE "\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "y"
  SEMICOLON ";"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "writetest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "y"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- off"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    SESSION_KW "SESSION"
    WHITESPACE " "
    CHARACTERISTICS_KW "CHARACTERISTICS"
    WHITESPACE " "
    AS_KW "AS"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  DROP_TABLE
    DROP_KW "DROP"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "writetest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- fail"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "writetest"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- fail"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "writetest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  DELETE_STMT
    DELETE_KW "DELETE"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "temptest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  UPDATE_STMT
    UPDATE_KW "UPDATE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "temptest"
    WHITESPACE " "
    SET_KW "SET"
    WHITESPACE " "
    NAME_REF
      IDENT "a"
    WHITESPACE " "
    EQ "="
    WHITESPACE " "
    LITERAL
      INT_NUMBER "0"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "writetest"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BIN_EXPR
        BIN_EXPR
          FIELD_EXPR
            NAME_REF
              IDENT "temptest"
            DOT "."
            NAME_REF
              IDENT "a"
          WHITESPACE " "
          EQ "="
          WHITESPACE " "
          LITERAL
            INT_NUMBER "1"
        WHITESPACE " "
        AND_KW "AND"
        WHITESPACE " "
        BIN_EXPR
          FIELD_EXPR
            NAME_REF
              IDENT "writetest"
            DOT "."
            NAME_REF
              IDENT "a"
          WHITESPACE " "
          EQ "="
          WHITESPACE " "
          FIELD_EXPR
            NAME_REF
              IDENT "temptest"
            DOT "."
            NAME_REF
              IDENT "a"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  PREPARE_STMT
    PREPARE_KW "PREPARE"
    WHITESPACE " "
    NAME
      IDENT "test"
    WHITESPACE " "
    AS_KW "AS"
    WHITESPACE " "
    UPDATE_STMT
      UPDATE_KW "UPDATE"
      WHITESPACE " "
      PATH
        PATH_SEGMENT
          NAME_REF
            IDENT "writetest"
      WHITESPACE " "
      SET_KW "SET"
      WHITESPACE " "
      NAME_REF
        IDENT "a"
      WHITESPACE " "
      EQ "="
      WHITESPACE " "
      LITERAL
        INT_NUMBER "0"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  EXECUTE_STMT
    EXECUTE_KW "EXECUTE"
    WHITESPACE " "
    NAME_REF
      IDENT "test"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- fail"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "writetest"
      COMMA ","
      WHITESPACE " "
      NAME_REF
        IDENT "temptest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  CREATE_TABLE_AS_STMT
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "test"
    WHITESPACE " "
    AS_KW "AS"
    WHITESPACE " "
    SELECT
      SELECT_CLAUSE
        SELECT_KW "SELECT"
        WHITESPACE " "
        TARGET_LIST
          TARGET
            STAR "*"
      WHITESPACE " "
      FROM_CLAUSE
        FROM_KW "FROM"
        WHITESPACE " "
        NAME_REF
          IDENT "writetest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- fail"
  WHITESPACE "\n\n"
  BEGIN_STMT
    START_KW "START"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
  SEMICOLON ";"
  WHITESPACE "\n"
  DROP_TABLE
    DROP_KW "DROP"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "writetest"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- ok"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- Subtransactions, basic tests"
  WHITESPACE "\n"
  COMMENT "-- create & drop tables"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    SESSION_KW "SESSION"
    WHITESPACE " "
    CHARACTERISTICS_KW "CHARACTERISTICS"
    WHITESPACE " "
    AS_KW "AS"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
  SEMICOLON ";"
  WHITESPACE "\n"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "trans_foobar"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "trans_foo"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  DROP_TABLE
    DROP_KW "DROP"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_foo"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "trans_bar"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "trans_baz"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  DROP_TABLE
    DROP_KW "drop"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_foobar"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "trans_barbaz"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMENT "-- should exist: trans_barbaz, trans_baz, trans_foo"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "trans_foo"
  SEMICOLON ";"
  WHITESPACE "\t\t"
  COMMENT "-- should be empty"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "trans_bar"
  SEMICOLON ";"
  WHITESPACE "\t\t"
  COMMENT "-- shouldn't exist"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "trans_barbaz"
  SEMICOLON ";"
  WHITESPACE "\t"
  COMMENT "-- should be empty"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "trans_baz"
  SEMICOLON ";"
  WHITESPACE "\t\t"
  COMMENT "-- should be empty"
  WHITESPACE "\n\n"
  COMMENT "-- inserts"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_foo"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_bar"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_barbaz"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "three"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "four"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_foo"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "2"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "four"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "three"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "three"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_foo"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "3"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "trans_foo"
  SEMICOLON ";"
  WHITESPACE "\t\t"
  COMMENT "-- should have 1 and 3"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "trans_barbaz"
  SEMICOLON ";"
  WHITESPACE "\t"
  COMMENT "-- should have 1"
  WHITESPACE "\n\n"
  COMMENT "-- test whole-tree commit"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          NAME_REF
            IDENT "trans_foo"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "savepoints"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "three"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "four"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "2"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "five"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "3"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "five"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\t\t"
  COMMENT "-- should not be in a transaction block"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- test whole-tree rollback"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  DELETE_STMT
    DELETE_KW "DELETE"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BIN_EXPR
        NAME_REF
          IDENT "a"
        EQ "="
        LITERAL
          INT_NUMBER "1"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  DELETE_STMT
    DELETE_KW "DELETE"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BIN_EXPR
        NAME_REF
          IDENT "a"
        EQ "="
        LITERAL
          INT_NUMBER "1"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "three"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t"
  DELETE_STMT
    DELETE_KW "DELETE"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BIN_EXPR
        NAME_REF
          IDENT "a"
        EQ "="
        LITERAL
          INT_NUMBER "2"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\t\t"
  COMMENT "-- should not be in a transaction block"
  WHITESPACE "\n\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- test whole-tree commit on an aborted subtransaction"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "4"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "5"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          NAME_REF
            IDENT "trans_foo"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "6"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "7"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "8"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMENT "-- rows 6 and 8 should have been created by the same xact"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          BIN_EXPR
            FIELD_EXPR
              NAME_REF
                IDENT "a"
              DOT "."
              NAME_REF
                IDENT "xmin"
            WHITESPACE " "
            EQ "="
            WHITESPACE " "
            FIELD_EXPR
              NAME_REF
                IDENT "b"
              DOT "."
              NAME_REF
                IDENT "xmin"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
      WHITESPACE " "
      ALIAS
        NAME
          IDENT "a"
      COMMA ","
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
      WHITESPACE " "
      ALIAS
        NAME
          IDENT "b"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BIN_EXPR
        BIN_EXPR
          FIELD_EXPR
            NAME_REF
              IDENT "a"
            DOT "."
            NAME_REF
              IDENT "a"
          EQ "="
          LITERAL
            INT_NUMBER "6"
        WHITESPACE " "
        AND_KW "AND"
        WHITESPACE " "
        BIN_EXPR
          FIELD_EXPR
            NAME_REF
              IDENT "b"
            DOT "."
            NAME_REF
              IDENT "a"
          EQ "="
          LITERAL
            INT_NUMBER "8"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMENT "-- rows 6 and 7 should have been created by different xacts"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          BIN_EXPR
            FIELD_EXPR
              NAME_REF
                IDENT "a"
              DOT "."
              NAME_REF
                IDENT "xmin"
            WHITESPACE " "
            EQ "="
            WHITESPACE " "
            FIELD_EXPR
              NAME_REF
                IDENT "b"
              DOT "."
              NAME_REF
                IDENT "xmin"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
      WHITESPACE " "
      ALIAS
        NAME
          IDENT "a"
      COMMA ","
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
      WHITESPACE " "
      ALIAS
        NAME
          IDENT "b"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BIN_EXPR
        BIN_EXPR
          FIELD_EXPR
            NAME_REF
              IDENT "a"
            DOT "."
            NAME_REF
              IDENT "a"
          EQ "="
          LITERAL
            INT_NUMBER "6"
        WHITESPACE " "
        AND_KW "AND"
        WHITESPACE " "
        BIN_EXPR
          FIELD_EXPR
            NAME_REF
              IDENT "b"
            DOT "."
            NAME_REF
              IDENT "a"
          EQ "="
          LITERAL
            INT_NUMBER "7"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "9"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "10"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "11"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          NAME_REF
            IDENT "a"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BIN_EXPR
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        IN_KW "in"
        WHITESPACE " "
        TUPLE_EXPR
          L_PAREN "("
          LITERAL
            INT_NUMBER "9"
          COMMA ","
          WHITESPACE " "
          LITERAL
            INT_NUMBER "10"
          COMMA ","
          WHITESPACE " "
          LITERAL
            INT_NUMBER "11"
          R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMENT "-- rows 9 and 11 should have been created by different xacts"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          BIN_EXPR
            FIELD_EXPR
              NAME_REF
                IDENT "a"
              DOT "."
              NAME_REF
                IDENT "xmin"
            WHITESPACE " "
            EQ "="
            WHITESPACE " "
            FIELD_EXPR
              NAME_REF
                IDENT "b"
              DOT "."
              NAME_REF
                IDENT "xmin"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
      WHITESPACE " "
      ALIAS
        NAME
          IDENT "a"
      COMMA ","
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
      WHITESPACE " "
      ALIAS
        NAME
          IDENT "b"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BIN_EXPR
        BIN_EXPR
          FIELD_EXPR
            NAME_REF
              IDENT "a"
            DOT "."
            NAME_REF
              IDENT "a"
          EQ "="
          LITERAL
            INT_NUMBER "9"
        WHITESPACE " "
        AND_KW "AND"
        WHITESPACE " "
        BIN_EXPR
          FIELD_EXPR
            NAME_REF
              IDENT "b"
            DOT "."
            NAME_REF
              IDENT "a"
          EQ "="
          LITERAL
            INT_NUMBER "11"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "12"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "13"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "14"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "15"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "16"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "three"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "17"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          NAME_REF
            IDENT "a"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BETWEEN_EXPR
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        BETWEEN_KW "BETWEEN"
        WHITESPACE " "
        LITERAL
          INT_NUMBER "12"
        WHITESPACE " "
        AND_KW "AND"
        WHITESPACE " "
        LITERAL
          INT_NUMBER "17"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "18"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "19"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "20"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "21"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "22"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          NAME_REF
            IDENT "a"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "savepoints"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "WHERE"
      WHITESPACE " "
      BETWEEN_EXPR
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        BETWEEN_KW "BETWEEN"
        WHITESPACE " "
        LITERAL
          INT_NUMBER "18"
        WHITESPACE " "
        AND_KW "AND"
        WHITESPACE " "
        LITERAL
          INT_NUMBER "22"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  DROP_TABLE
    DROP_KW "DROP"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "savepoints"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- only in a transaction block:"
  WHITESPACE "\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- Only \"rollback to\" allowed in aborted state"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n  "
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n  "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          BIN_EXPR
            LITERAL
              INT_NUMBER "0"
            SLASH "/"
            LITERAL
              INT_NUMBER "0"
  SEMICOLON ";"
  WHITESPACE "\n  "
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "    "
  COMMENT "-- ignored till the end of ..."
  WHITESPACE "\n  "
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "      "
  COMMENT "-- ignored till the end of ..."
  WHITESPACE "\n  "
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n  "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "1"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "1"
  SEMICOLON ";"
  WHITESPACE "\t\t\t"
  COMMENT "-- this should work"
  WHITESPACE "\n\n"
  COMMENT "-- check non-transactional behavior of cursors"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  DECLARE_STMT
    DECLARE_KW "DECLARE"
    WHITESPACE " "
    NAME
      IDENT "c"
    WHITESPACE " "
    CURSOR_KW "CURSOR"
    WHITESPACE " "
    FOR_KW "FOR"
    WHITESPACE " "
    SELECT
      SELECT_CLAUSE
        SELECT_KW "SELECT"
        WHITESPACE " "
        TARGET_LIST
          TARGET
            NAME_REF
              IDENT "unique2"
      WHITESPACE " "
      FROM_CLAUSE
        FROM_KW "FROM"
        WHITESPACE " "
        NAME_REF
          IDENT "tenk1"
      WHITESPACE " "
      ORDER_BY_CLAUSE
        ORDER_KW "ORDER"
        WHITESPACE " "
        BY_KW "BY"
        WHITESPACE " "
        NAME_REF
          IDENT "unique2"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    LITERAL
      INT_NUMBER "10"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    NAME
      IDENT "c"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    LITERAL
      INT_NUMBER "10"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    NAME
      IDENT "c"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "one"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    LITERAL
      INT_NUMBER "10"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    NAME
      IDENT "c"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  CLOSE_STMT
    CLOSE_KW "CLOSE"
    WHITESPACE " "
    NAME
      IDENT "c"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  DECLARE_STMT
    DECLARE_KW "DECLARE"
    WHITESPACE " "
    NAME
      IDENT "c"
    WHITESPACE " "
    CURSOR_KW "CURSOR"
    WHITESPACE " "
    FOR_KW "FOR"
    WHITESPACE " "
    SELECT
      SELECT_CLAUSE
        SELECT_KW "SELECT"
        WHITESPACE " "
        TARGET_LIST
          TARGET
            BIN_EXPR
              NAME_REF
                IDENT "unique2"
              SLASH "/"
              LITERAL
                INT_NUMBER "0"
      WHITESPACE " "
      FROM_CLAUSE
        FROM_KW "FROM"
        WHITESPACE " "
        NAME_REF
          IDENT "tenk1"
      WHITESPACE " "
      ORDER_BY_CLAUSE
        ORDER_KW "ORDER"
        WHITESPACE " "
        BY_KW "BY"
        WHITESPACE " "
        NAME_REF
          IDENT "unique2"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    LITERAL
      INT_NUMBER "10"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    NAME
      IDENT "c"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  COMMENT "-- c is now dead to the world ..."
  WHITESPACE "\n\t\t"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    LITERAL
      INT_NUMBER "10"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    NAME
      IDENT "c"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "two"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    LITERAL
      INT_NUMBER "10"
    WHITESPACE " "
    FROM_KW "FROM"
    WHITESPACE " "
    NAME
      IDENT "c"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "--"
  WHITESPACE "\n"
  COMMENT "-- Check that \"stable\" functions are really stable.  They should not be"
  WHITESPACE "\n"
  COMMENT "-- able to see the partial results of the calling query.  (Ideally we would"
  WHITESPACE "\n"
  COMMENT "-- also check that they don't see commits of concurrent transactions, but"
  WHITESPACE "\n"
  COMMENT "-- that's a mite hard to do within the limitations of pg_regress.)"
  WHITESPACE "\n"
  COMMENT "--"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "from"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  CREATE_FUNCTION_STMT
    CREATE_KW "create"
    WHITESPACE " "
    OR_REPLACE
      OR_KW "or"
      WHITESPACE " "
      REPLACE_KW "replace"
    WHITESPACE " "
    FUNCTION_KW "function"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "max_xacttest"
    PARAM_LIST
      L_PAREN "("
      R_PAREN ")"
    WHITESPACE " "
    RET_TYPE
      RETURNS_KW "returns"
      WHITESPACE " "
      PATH_TYPE
        PATH
          PATH_SEGMENT
            NAME_REF
              SMALLINT_KW "smallint"
    WHITESPACE " "
    FUNC_OPTION_LIST
      LANGUAGE_FUNC_OPTION
        LANGUAGE_KW "language"
        WHITESPACE " "
        SQL_KW "sql"
      WHITESPACE " "
      AS_FUNC_OPTION
        AS_KW "as"
        WHITESPACE "\n"
        LITERAL
          STRING "'select max(a) from xacttest'"
      WHITESPACE " "
      VOLATILITY_FUNC_OPTION
        STABLE_KW "stable"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "begin"
  SEMICOLON ";"
  WHITESPACE "\n"
  UPDATE_STMT
    UPDATE_KW "update"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "xacttest"
    WHITESPACE " "
    SET_KW "set"
    WHITESPACE " "
    NAME_REF
      IDENT "a"
    WHITESPACE " "
    EQ "="
    WHITESPACE " "
    BIN_EXPR
      CALL_EXPR
        NAME_REF
          IDENT "max_xacttest"
        ARG_LIST
          L_PAREN "("
          R_PAREN ")"
      WHITESPACE " "
      PLUS "+"
      WHITESPACE " "
      LITERAL
        INT_NUMBER "10"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "where"
      WHITESPACE " "
      BIN_EXPR
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        R_ANGLE ">"
        WHITESPACE " "
        LITERAL
          INT_NUMBER "0"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "from"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- But a volatile function can see the partial results of the calling query"
  WHITESPACE "\n"
  CREATE_FUNCTION_STMT
    CREATE_KW "create"
    WHITESPACE " "
    OR_REPLACE
      OR_KW "or"
      WHITESPACE " "
      REPLACE_KW "replace"
    WHITESPACE " "
    FUNCTION_KW "function"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "max_xacttest"
    PARAM_LIST
      L_PAREN "("
      R_PAREN ")"
    WHITESPACE " "
    RET_TYPE
      RETURNS_KW "returns"
      WHITESPACE " "
      PATH_TYPE
        PATH
          PATH_SEGMENT
            NAME_REF
              SMALLINT_KW "smallint"
    WHITESPACE " "
    FUNC_OPTION_LIST
      LANGUAGE_FUNC_OPTION
        LANGUAGE_KW "language"
        WHITESPACE " "
        SQL_KW "sql"
      WHITESPACE " "
      AS_FUNC_OPTION
        AS_KW "as"
        WHITESPACE "\n"
        LITERAL
          STRING "'select max(a) from xacttest'"
      WHITESPACE " "
      VOLATILITY_FUNC_OPTION
        VOLATILE_KW "volatile"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "begin"
  SEMICOLON ";"
  WHITESPACE "\n"
  UPDATE_STMT
    UPDATE_KW "update"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "xacttest"
    WHITESPACE " "
    SET_KW "set"
    WHITESPACE " "
    NAME_REF
      IDENT "a"
    WHITESPACE " "
    EQ "="
    WHITESPACE " "
    BIN_EXPR
      CALL_EXPR
        NAME_REF
          IDENT "max_xacttest"
        ARG_LIST
          L_PAREN "("
          R_PAREN ")"
      WHITESPACE " "
      PLUS "+"
      WHITESPACE " "
      LITERAL
        INT_NUMBER "10"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "where"
      WHITESPACE " "
      BIN_EXPR
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        R_ANGLE ">"
        WHITESPACE " "
        LITERAL
          INT_NUMBER "0"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "from"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- Now the same test with plpgsql (since it depends on SPI which is different)"
  WHITESPACE "\n"
  CREATE_FUNCTION_STMT
    CREATE_KW "create"
    WHITESPACE " "
    OR_REPLACE
      OR_KW "or"
      WHITESPACE " "
      REPLACE_KW "replace"
    WHITESPACE " "
    FUNCTION_KW "function"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "max_xacttest"
    PARAM_LIST
      L_PAREN "("
      R_PAREN ")"
    WHITESPACE " "
    RET_TYPE
      RETURNS_KW "returns"
      WHITESPACE " "
      PATH_TYPE
        PATH
          PATH_SEGMENT
            NAME_REF
              SMALLINT_KW "smallint"
    WHITESPACE " "
    FUNC_OPTION_LIST
      LANGUAGE_FUNC_OPTION
        LANGUAGE_KW "language"
        WHITESPACE " "
        IDENT "plpgsql"
      WHITESPACE " "
      AS_FUNC_OPTION
        AS_KW "as"
        WHITESPACE "\n"
        LITERAL
          STRING "'begin return max(a) from xacttest; end'"
      WHITESPACE " "
      VOLATILITY_FUNC_OPTION
        STABLE_KW "stable"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "begin"
  SEMICOLON ";"
  WHITESPACE "\n"
  UPDATE_STMT
    UPDATE_KW "update"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "xacttest"
    WHITESPACE " "
    SET_KW "set"
    WHITESPACE " "
    NAME_REF
      IDENT "a"
    WHITESPACE " "
    EQ "="
    WHITESPACE " "
    BIN_EXPR
      CALL_EXPR
        NAME_REF
          IDENT "max_xacttest"
        ARG_LIST
          L_PAREN "("
          R_PAREN ")"
      WHITESPACE " "
      PLUS "+"
      WHITESPACE " "
      LITERAL
        INT_NUMBER "10"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "where"
      WHITESPACE " "
      BIN_EXPR
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        R_ANGLE ">"
        WHITESPACE " "
        LITERAL
          INT_NUMBER "0"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "from"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  CREATE_FUNCTION_STMT
    CREATE_KW "create"
    WHITESPACE " "
    OR_REPLACE
      OR_KW "or"
      WHITESPACE " "
      REPLACE_KW "replace"
    WHITESPACE " "
    FUNCTION_KW "function"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "max_xacttest"
    PARAM_LIST
      L_PAREN "("
      R_PAREN ")"
    WHITESPACE " "
    RET_TYPE
      RETURNS_KW "returns"
      WHITESPACE " "
      PATH_TYPE
        PATH
          PATH_SEGMENT
            NAME_REF
              SMALLINT_KW "smallint"
    WHITESPACE " "
    FUNC_OPTION_LIST
      LANGUAGE_FUNC_OPTION
        LANGUAGE_KW "language"
        WHITESPACE " "
        IDENT "plpgsql"
      WHITESPACE " "
      AS_FUNC_OPTION
        AS_KW "as"
        WHITESPACE "\n"
        LITERAL
          STRING "'begin return max(a) from xacttest; end'"
      WHITESPACE " "
      VOLATILITY_FUNC_OPTION
        VOLATILE_KW "volatile"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "begin"
  SEMICOLON ";"
  WHITESPACE "\n"
  UPDATE_STMT
    UPDATE_KW "update"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "xacttest"
    WHITESPACE " "
    SET_KW "set"
    WHITESPACE " "
    NAME_REF
      IDENT "a"
    WHITESPACE " "
    EQ "="
    WHITESPACE " "
    BIN_EXPR
      CALL_EXPR
        NAME_REF
          IDENT "max_xacttest"
        ARG_LIST
          L_PAREN "("
          R_PAREN ")"
      WHITESPACE " "
      PLUS "+"
      WHITESPACE " "
      LITERAL
        INT_NUMBER "10"
    WHITESPACE " "
    WHERE_CLAUSE
      WHERE_KW "where"
      WHITESPACE " "
      BIN_EXPR
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        R_ANGLE ">"
        WHITESPACE " "
        LITERAL
          INT_NUMBER "0"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "from"
      WHITESPACE " "
      NAME_REF
        IDENT "xacttest"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  SEMICOLON ";"
  WHITESPACE "\n\n\n"
  COMMENT "-- test case for problems with dropping an open relation during abort"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  SAVEPOINT_STMT
    SAVEPOINT_KW "savepoint"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "koju"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "INT"
        WHITESPACE " "
        UNIQUE_CONSTRAINT
          UNIQUE_KW "UNIQUE"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "koju"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "koju"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
    WHITESPACE " "
    TO_KW "to"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n\n\t"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "koju"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "INT"
        WHITESPACE " "
        UNIQUE_CONSTRAINT
          UNIQUE_KW "UNIQUE"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "koju"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\t"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "koju"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  DROP_TABLE
    DROP_KW "DROP"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_foo"
  SEMICOLON ";"
  WHITESPACE "\n"
  DROP_TABLE
    DROP_KW "DROP"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_baz"
  SEMICOLON ";"
  WHITESPACE "\n"
  DROP_TABLE
    DROP_KW "DROP"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_barbaz"
  SEMICOLON ";"
  WHITESPACE "\n\n\n"
  COMMENT "-- test case for problems with revalidating an open relation during abort"
  WHITESPACE "\n"
  CREATE_FUNCTION_STMT
    CREATE_KW "create"
    WHITESPACE " "
    FUNCTION_KW "function"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "inverse"
    PARAM_LIST
      L_PAREN "("
      PARAM
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
    WHITESPACE " "
    RET_TYPE
      RETURNS_KW "returns"
      WHITESPACE " "
      PATH_TYPE
        PATH
          PATH_SEGMENT
            NAME_REF
              IDENT "float8"
    WHITESPACE " "
    FUNC_OPTION_LIST
      AS_FUNC_OPTION
        AS_KW "as"
        WHITESPACE "\n"
        LITERAL
          DOLLAR_QUOTED_STRING "$$\nbegin\n  analyze revalidate_bug;\n  return 1::float8/$1;\nexception\n  when division_by_zero then return 0;\nend$$"
      WHITESPACE " "
      LANGUAGE_FUNC_OPTION
        LANGUAGE_KW "language"
        WHITESPACE " "
        IDENT "plpgsql"
      WHITESPACE " "
      VOLATILITY_FUNC_OPTION
        VOLATILE_KW "volatile"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  CREATE_TABLE
    CREATE_KW "create"
    WHITESPACE " "
    TABLE_KW "table"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "revalidate_bug"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "c"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                IDENT "float8"
        WHITESPACE " "
        UNIQUE_CONSTRAINT
          UNIQUE_KW "unique"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "revalidate_bug"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "revalidate_bug"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      WHITESPACE " "
      L_PAREN "("
      CALL_EXPR
        NAME_REF
          IDENT "inverse"
        ARG_LIST
          L_PAREN "("
          LITERAL
            INT_NUMBER "0"
          R_PAREN ")"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  DROP_TABLE
    DROP_KW "drop"
    WHITESPACE " "
    TABLE_KW "table"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "revalidate_bug"
  SEMICOLON ";"
  WHITESPACE "\n"
  DROP_FUNCTION_STMT
    DROP_KW "drop"
    WHITESPACE " "
    FUNCTION_KW "function"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "inverse"
    PARAM_LIST
      L_PAREN "("
      PARAM
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\n\n"
  COMMENT "-- verify that cursors created during an aborted subtransaction are"
  WHITESPACE "\n"
  COMMENT "-- closed, but that we do not rollback the effect of any FETCHs"
  WHITESPACE "\n"
  COMMENT "-- performed in the aborted subtransaction"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "begin"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "savepoint"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n"
  CREATE_TABLE
    CREATE_KW "create"
    WHITESPACE " "
    TABLE_KW "table"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "trans_abc"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "5"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "10"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  DECLARE_STMT
    DECLARE_KW "declare"
    WHITESPACE " "
    NAME
      IDENT "foo"
    WHITESPACE " "
    CURSOR_KW "cursor"
    WHITESPACE " "
    FOR_KW "for"
    WHITESPACE " "
    SELECT
      SELECT_CLAUSE
        SELECT_KW "select"
        WHITESPACE " "
        TARGET_LIST
          TARGET
            STAR "*"
      WHITESPACE " "
      FROM_CLAUSE
        FROM_KW "from"
        WHITESPACE " "
        NAME_REF
          IDENT "trans_abc"
  SEMICOLON ";"
  WHITESPACE "\n"
  FETCH_STMT
    FETCH_KW "fetch"
    WHITESPACE " "
    FROM_KW "from"
    WHITESPACE " "
    NAME
      IDENT "foo"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
    WHITESPACE " "
    TO_KW "to"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- should fail"
  WHITESPACE "\n"
  FETCH_STMT
    FETCH_KW "fetch"
    WHITESPACE " "
    FROM_KW "from"
    WHITESPACE " "
    NAME
      IDENT "foo"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "commit"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "begin"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  CREATE_TABLE
    CREATE_KW "create"
    WHITESPACE " "
    TABLE_KW "table"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "trans_abc"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "5"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "10"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "15"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  DECLARE_STMT
    DECLARE_KW "declare"
    WHITESPACE " "
    NAME
      IDENT "foo"
    WHITESPACE " "
    CURSOR_KW "cursor"
    WHITESPACE " "
    FOR_KW "for"
    WHITESPACE " "
    SELECT
      SELECT_CLAUSE
        SELECT_KW "select"
        WHITESPACE " "
        TARGET_LIST
          TARGET
            STAR "*"
      WHITESPACE " "
      FROM_CLAUSE
        FROM_KW "from"
        WHITESPACE " "
        NAME_REF
          IDENT "trans_abc"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  FETCH_STMT
    FETCH_KW "fetch"
    WHITESPACE " "
    FROM_KW "from"
    WHITESPACE " "
    NAME
      IDENT "foo"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "savepoint"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n"
  FETCH_STMT
    FETCH_KW "fetch"
    WHITESPACE " "
    FROM_KW "from"
    WHITESPACE " "
    NAME
      IDENT "foo"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
    WHITESPACE " "
    TO_KW "to"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  FETCH_STMT
    FETCH_KW "fetch"
    WHITESPACE " "
    FROM_KW "from"
    WHITESPACE " "
    NAME
      IDENT "foo"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  ROLLBACK_STMT
    ABORT_KW "abort"
  SEMICOLON ";"
  WHITESPACE "\n\n\n"
  COMMENT "-- Test for proper cleanup after a failure in a cursor portal"
  WHITESPACE "\n"
  COMMENT "-- that was created in an outer subtransaction"
  WHITESPACE "\n"
  CREATE_FUNCTION_STMT
    CREATE_KW "CREATE"
    WHITESPACE " "
    FUNCTION_KW "FUNCTION"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "invert"
    PARAM_LIST
      L_PAREN "("
      PARAM
        NAME
          IDENT "x"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                IDENT "float8"
      R_PAREN ")"
    WHITESPACE " "
    RET_TYPE
      RETURNS_KW "RETURNS"
      WHITESPACE " "
      PATH_TYPE
        PATH
          PATH_SEGMENT
            NAME_REF
              IDENT "float8"
    WHITESPACE " "
    FUNC_OPTION_LIST
      LANGUAGE_FUNC_OPTION
        LANGUAGE_KW "LANGUAGE"
        WHITESPACE " "
        IDENT "plpgsql"
      WHITESPACE " "
      AS_FUNC_OPTION
        AS_KW "AS"
        WHITESPACE "\n"
        LITERAL
          DOLLAR_QUOTED_STRING "$$ begin return 1/x; end $$"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  CREATE_FUNCTION_STMT
    CREATE_KW "CREATE"
    WHITESPACE " "
    FUNCTION_KW "FUNCTION"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "create_temp_tab"
    PARAM_LIST
      L_PAREN "("
      R_PAREN ")"
    WHITESPACE " "
    RET_TYPE
      RETURNS_KW "RETURNS"
      WHITESPACE " "
      PATH_TYPE
        PATH
          PATH_SEGMENT
            NAME_REF
              TEXT_KW "text"
    WHITESPACE "\n"
    FUNC_OPTION_LIST
      LANGUAGE_FUNC_OPTION
        LANGUAGE_KW "LANGUAGE"
        WHITESPACE " "
        IDENT "plpgsql"
      WHITESPACE " "
      AS_FUNC_OPTION
        AS_KW "AS"
        WHITESPACE " "
        LITERAL
          DOLLAR_QUOTED_STRING "$$\nBEGIN\n  CREATE TEMP TABLE new_table (f1 float8);\n  -- case of interest is that we fail while holding an open\n  -- relcache reference to new_table\n  INSERT INTO new_table SELECT invert(0.0);\n  RETURN 'foo';\nEND $$"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  SEMICOLON ";"
  WHITESPACE "\n"
  DECLARE_STMT
    DECLARE_KW "DECLARE"
    WHITESPACE " "
    NAME
      IDENT "ok"
    WHITESPACE " "
    CURSOR_KW "CURSOR"
    WHITESPACE " "
    FOR_KW "FOR"
    WHITESPACE " "
    SELECT
      SELECT_CLAUSE
        SELECT_KW "SELECT"
        WHITESPACE " "
        TARGET_LIST
          TARGET
            STAR "*"
      WHITESPACE " "
      FROM_CLAUSE
        FROM_KW "FROM"
        WHITESPACE " "
        NAME_REF
          IDENT "int8_tbl"
  SEMICOLON ";"
  WHITESPACE "\n"
  DECLARE_STMT
    DECLARE_KW "DECLARE"
    WHITESPACE " "
    NAME
      IDENT "ctt"
    WHITESPACE " "
    CURSOR_KW "CURSOR"
    WHITESPACE " "
    FOR_KW "FOR"
    WHITESPACE " "
    SELECT
      SELECT_CLAUSE
        SELECT_KW "SELECT"
        WHITESPACE " "
        TARGET_LIST
          TARGET
            CALL_EXPR
              NAME_REF
                IDENT "create_temp_tab"
              ARG_LIST
                L_PAREN "("
                R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    NAME
      IDENT "ok"
  SEMICOLON ";"
  WHITESPACE "\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "s1"
  SEMICOLON ";"
  WHITESPACE "\n"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    NAME
      IDENT "ok"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- should work"
  WHITESPACE "\n"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    NAME
      IDENT "ctt"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- error occurs here"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    NAME_REF
      IDENT "s1"
  SEMICOLON ";"
  WHITESPACE "\n"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    NAME
      IDENT "ok"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- should work"
  WHITESPACE "\n"
  FETCH_STMT
    FETCH_KW "FETCH"
    WHITESPACE " "
    NAME
      IDENT "ctt"
  SEMICOLON ";"
  WHITESPACE " "
  COMMENT "-- must be rejected"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  DROP_FUNCTION_STMT
    DROP_KW "DROP"
    WHITESPACE " "
    FUNCTION_KW "FUNCTION"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "create_temp_tab"
    PARAM_LIST
      L_PAREN "("
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  DROP_FUNCTION_STMT
    DROP_KW "DROP"
    WHITESPACE " "
    FUNCTION_KW "FUNCTION"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "invert"
    PARAM_LIST
      L_PAREN "("
      PARAM
        NAME
          IDENT "x"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                IDENT "float8"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\n\n"
  COMMENT "-- Tests for AND CHAIN"
  WHITESPACE "\n\n"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "trans_abc"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- set nondefault value so we have something to override below"
  WHITESPACE "\n"
  SET_STMT
    SET_KW "SET"
    WHITESPACE " "
    NAME_REF
      IDENT "default_transaction_read_only"
    WHITESPACE " "
    EQ "="
  WHITESPACE " "
  ERROR
    ON_KW "on"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    START_KW "START"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    REPEATABLE_KW "REPEATABLE"
    WHITESPACE " "
    READ_KW "READ"
    COMMA ","
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
    COMMA ","
    WHITESPACE " "
    DEFERRABLE_KW "DEFERRABLE"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "2"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- TBLOCK_END"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        STRING "'error'"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "3"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- check it's really aborted"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- TBLOCK_ABORT_END"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "4"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    START_KW "START"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    REPEATABLE_KW "REPEATABLE"
    WHITESPACE " "
    READ_KW "READ"
    COMMA ","
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
    COMMA ","
    WHITESPACE " "
    DEFERRABLE_KW "DEFERRABLE"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        STRING "'error'"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- TBLOCK_ABORT_PENDING"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "5"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    START_KW "START"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    REPEATABLE_KW "REPEATABLE"
    WHITESPACE " "
    READ_KW "READ"
    COMMA ","
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
    COMMA ","
    WHITESPACE " "
    DEFERRABLE_KW "DEFERRABLE"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- TBLOCK_SUBCOMMIT"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    START_KW "START"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    COMMITTED_KW "COMMITTED"
    COMMA ","
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
    COMMA ","
    WHITESPACE " "
    DEFERRABLE_KW "DEFERRABLE"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "x"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- TBLOCK_SUBCOMMIT"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- different mix of options just for fun"
  WHITESPACE "\n"
  BEGIN_STMT
    START_KW "START"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    SERIALIZABLE_KW "SERIALIZABLE"
    COMMA ","
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    WRITE_KW "WRITE"
    COMMA ","
    WHITESPACE " "
    NOT_KW "NOT"
    WHITESPACE " "
    DEFERRABLE_KW "DEFERRABLE"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "6"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- TBLOCK_ABORT_PENDING"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        STRING "'error'"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- TBLOCK_ABORT_END"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_deferrable"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- not allowed outside a transaction block"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- error"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- error"
  WHITESPACE "\n\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "trans_abc"
    WHITESPACE " "
    ORDER_BY_CLAUSE
      ORDER_KW "ORDER"
      WHITESPACE " "
      BY_KW "BY"
      WHITESPACE " "
      LITERAL
        INT_NUMBER "1"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  RESET_STMT
    RESET_KW "RESET"
    WHITESPACE " "
    NAME_REF
      IDENT "default_transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  DROP_TABLE
    DROP_KW "DROP"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
  SEMICOLON ";"
  WHITESPACE "\n\n\n"
  COMMENT "-- Test assorted behaviors around the implicit transaction block created"
  WHITESPACE "\n"
  COMMENT "-- when multiple SQL commands are sent in a single Query message.  These"
  WHITESPACE "\n"
  COMMENT "-- tests rely on the fact that psql will not break SQL commands apart at a"
  WHITESPACE "\n"
  COMMENT "-- backslash-quoted semicolon, but will send them as one Query."
  WHITESPACE "\n\n"
  CREATE_TABLE
    CREATE_KW "create"
    WHITESPACE " "
    TEMP_KW "temp"
    WHITESPACE " "
    TABLE_KW "table"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "i_table"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "f1"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- psql will show all results of a multi-statement Query"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "1"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "2"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "3"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- this implicitly commits:"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "i_table"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      L_PAREN "("
      LITERAL
        INT_NUMBER "1"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "from"
      WHITESPACE " "
      NAME_REF
        IDENT "i_table"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMENT "-- 1/0 error will cause rolling back the whole implicit transaction"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "i_table"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      L_PAREN "("
      LITERAL
        INT_NUMBER "2"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "from"
      WHITESPACE " "
      NAME_REF
        IDENT "i_table"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          BIN_EXPR
            LITERAL
              INT_NUMBER "1"
            SLASH "/"
            LITERAL
              INT_NUMBER "0"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "from"
      WHITESPACE " "
      NAME_REF
        IDENT "i_table"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- we are not in a transaction at this point"
  WHITESPACE "\n\n"
  COMMENT "-- can use regular begin/commit/rollback within a single Query"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "begin"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "i_table"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      L_PAREN "("
      LITERAL
        INT_NUMBER "3"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "commit"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- we are not in a transaction at this point"
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "begin"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "i_table"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      L_PAREN "("
      LITERAL
        INT_NUMBER "4"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- we are not in a transaction at this point"
  WHITESPACE "\n\n"
  COMMENT "-- begin converts implicit transaction into a regular one that"
  WHITESPACE "\n"
  COMMENT "-- can extend past the end of the Query"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "1"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  BEGIN_STMT
    BEGIN_KW "begin"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "i_table"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      L_PAREN "("
      LITERAL
        INT_NUMBER "5"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "commit"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "1"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  BEGIN_STMT
    BEGIN_KW "begin"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "i_table"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      L_PAREN "("
      LITERAL
        INT_NUMBER "6"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- commit in implicit-transaction state commits but issues a warning."
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "i_table"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      L_PAREN "("
      LITERAL
        INT_NUMBER "7"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "commit"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "i_table"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      L_PAREN "("
      LITERAL
        INT_NUMBER "8"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          BIN_EXPR
            LITERAL
              INT_NUMBER "1"
            SLASH "/"
            LITERAL
              INT_NUMBER "0"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMENT "-- similarly, rollback aborts but issues a warning."
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "insert"
    WHITESPACE " "
    INTO_KW "into"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "i_table"
    WHITESPACE " "
    SELECT
      VALUES_KW "values"
      L_PAREN "("
      LITERAL
        INT_NUMBER "9"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "2"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "from"
      WHITESPACE " "
      NAME_REF
        IDENT "i_table"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- we are not in a transaction at this point"
  WHITESPACE "\n\n"
  COMMENT "-- implicit transaction block is still a transaction block, for e.g. VACUUM"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "1"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  VACUUM_STMT
    VACUUM_KW "VACUUM"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "1"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  VACUUM_STMT
    VACUUM_KW "VACUUM"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- we disallow savepoint-related commands in implicit-transaction state"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "1"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "sp"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "1"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "sp"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "sp"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "2"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "2"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  RELEASE_SAVEPOINT_STMT
    RELEASE_KW "RELEASE"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "sp"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "3"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- but this is OK, because the BEGIN converts it to a regular xact"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          LITERAL
            INT_NUMBER "1"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  BEGIN_STMT
    BEGIN_KW "BEGIN"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  SAVEPOINT_STMT
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "sp"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    TO_KW "TO"
    WHITESPACE " "
    SAVEPOINT_KW "SAVEPOINT"
    WHITESPACE " "
    NAME_REF
      IDENT "sp"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n\n"
  COMMENT "-- Tests for AND CHAIN in implicit transaction blocks"
  WHITESPACE "\n\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- error"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    READ_KW "READ"
    WHITESPACE " "
    ONLY_KW "ONLY"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- error"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_read_only"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  CREATE_TABLE
    CREATE_KW "CREATE"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME
          IDENT "trans_abc"
    WHITESPACE " "
    TABLE_ARGS
      L_PAREN "("
      COLUMN
        NAME_REF
          IDENT "a"
        WHITESPACE " "
        PATH_TYPE
          PATH
            PATH_SEGMENT
              NAME_REF
                INT_KW "int"
      R_PAREN ")"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- COMMIT/ROLLBACK + COMMIT/ROLLBACK AND CHAIN"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "7"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "8"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- 7 commit, 8 error"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "9"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "10"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- 9 rollback, 10 error"
  WHITESPACE "\n\n"
  COMMENT "-- COMMIT/ROLLBACK AND CHAIN + COMMIT/ROLLBACK"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "11"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "12"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- 11 error, 12 not reached"
  WHITESPACE "\n"
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "13"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "14"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- 13 error, 14 not reached"
  WHITESPACE "\n\n"
  COMMENT "-- START TRANSACTION + COMMIT/ROLLBACK AND CHAIN"
  WHITESPACE "\n"
  BEGIN_STMT
    START_KW "START"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    REPEATABLE_KW "REPEATABLE"
    WHITESPACE " "
    READ_KW "READ"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "15"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- 15 ok"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- transaction is active at this point"
  WHITESPACE "\n"
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  BEGIN_STMT
    START_KW "START"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    REPEATABLE_KW "REPEATABLE"
    WHITESPACE " "
    READ_KW "READ"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "16"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- 16 ok"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- transaction is active at this point"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  SET_STMT
    SET_KW "SET"
    WHITESPACE " "
    NAME_REF
      IDENT "default_transaction_isolation"
    WHITESPACE " "
    EQ "="
    WHITESPACE " "
    LITERAL
      STRING "'read committed'"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- START TRANSACTION + COMMIT/ROLLBACK + COMMIT/ROLLBACK AND CHAIN"
  WHITESPACE "\n"
  BEGIN_STMT
    START_KW "START"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    REPEATABLE_KW "REPEATABLE"
    WHITESPACE " "
    READ_KW "READ"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "17"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "18"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  COMMIT_STMT
    COMMIT_KW "COMMIT"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- 17 commit, 18 error"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- out of transaction block"
  WHITESPACE "\n\n"
  BEGIN_STMT
    START_KW "START"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    REPEATABLE_KW "REPEATABLE"
    WHITESPACE " "
    READ_KW "READ"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "19"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  INSERT_STMT
    INSERT_KW "INSERT"
    WHITESPACE " "
    INTO_KW "INTO"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
    WHITESPACE " "
    SELECT
      VALUES_KW "VALUES"
      WHITESPACE " "
      L_PAREN "("
      LITERAL
        INT_NUMBER "20"
      R_PAREN ")"
  ERROR
    ERROR "\\"
  SEMICOLON ";"
  WHITESPACE " "
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
    WHITESPACE " "
    AND_KW "AND"
    WHITESPACE " "
    CHAIN_KW "CHAIN"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- 19 rollback, 20 error"
  WHITESPACE "\n"
  SHOW_STMT
    SHOW_KW "SHOW"
    WHITESPACE " "
    NAME_REF
      IDENT "transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "  "
  COMMENT "-- out of transaction block"
  WHITESPACE "\n\n"
  RESET_STMT
    RESET_KW "RESET"
    WHITESPACE " "
    NAME_REF
      IDENT "default_transaction_isolation"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "SELECT"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          STAR "*"
    WHITESPACE " "
    FROM_CLAUSE
      FROM_KW "FROM"
      WHITESPACE " "
      NAME_REF
        IDENT "trans_abc"
    WHITESPACE " "
    ORDER_BY_CLAUSE
      ORDER_KW "ORDER"
      WHITESPACE " "
      BY_KW "BY"
      WHITESPACE " "
      LITERAL
        INT_NUMBER "1"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  DROP_TABLE
    DROP_KW "DROP"
    WHITESPACE " "
    TABLE_KW "TABLE"
    WHITESPACE " "
    PATH
      PATH_SEGMENT
        NAME_REF
          IDENT "trans_abc"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- TRANSACTION SNAPSHOT"
  WHITESPACE "\n"
  COMMENT "-- Incorrect identifier."
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    REPEATABLE_KW "REPEATABLE"
    WHITESPACE " "
    READ_KW "READ"
  SEMICOLON ";"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    SNAPSHOT_KW "SNAPSHOT"
    WHITESPACE " "
    LITERAL
      STRING "'Incorrect Identifier'"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
  SEMICOLON ";"
  WHITESPACE "\n"
  COMMENT "-- Correct identifier, missing file."
  WHITESPACE "\n"
  BEGIN_STMT
    BEGIN_KW "BEGIN"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    ISOLATION_KW "ISOLATION"
    WHITESPACE " "
    LEVEL_KW "LEVEL"
    WHITESPACE " "
    REPEATABLE_KW "REPEATABLE"
    WHITESPACE " "
    READ_KW "READ"
  SEMICOLON ";"
  WHITESPACE "\n"
  SET_TRANSACTION_STMT
    SET_KW "SET"
    WHITESPACE " "
    TRANSACTION_KW "TRANSACTION"
    WHITESPACE " "
    SNAPSHOT_KW "SNAPSHOT"
    WHITESPACE " "
    LITERAL
      STRING "'FFF-FFF-F'"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "ROLLBACK"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- Test for successful cleanup of an aborted transaction at session exit."
  WHITESPACE "\n"
  COMMENT "-- THIS MUST BE THE LAST TEST IN THIS FILE."
  WHITESPACE "\n\n"
  BEGIN_STMT
    BEGIN_KW "begin"
  SEMICOLON ";"
  WHITESPACE "\n"
  SELECT
    SELECT_CLAUSE
      SELECT_KW "select"
      WHITESPACE " "
      TARGET_LIST
        TARGET
          BIN_EXPR
            LITERAL
              INT_NUMBER "1"
            SLASH "/"
            LITERAL
              INT_NUMBER "0"
  SEMICOLON ";"
  WHITESPACE "\n"
  ROLLBACK_STMT
    ROLLBACK_KW "rollback"
    WHITESPACE " "
    TO_KW "to"
    WHITESPACE " "
    NAME_REF
      IDENT "X"
  SEMICOLON ";"
  WHITESPACE "\n\n"
  COMMENT "-- DO NOT ADD ANYTHING HERE."
  WHITESPACE "\n"
---
ERROR@1023: expected config value, got ON_KW
ERROR@1023: expected SEMICOLON
ERROR@1024: expected command, found ON_KW
ERROR@11166: expected config value, got ON_KW
ERROR@11166: expected SEMICOLON
ERROR@11167: expected command, found ON_KW
ERROR@13916: expected SEMICOLON
ERROR@13916: expected command, found ERROR
ERROR@13927: expected SEMICOLON
ERROR@13927: expected command, found ERROR
ERROR@13998: expected SEMICOLON
ERROR@13998: expected command, found ERROR
ERROR@14121: expected SEMICOLON
ERROR@14121: expected command, found ERROR
ERROR@14145: expected SEMICOLON
ERROR@14145: expected command, found ERROR
ERROR@14309: expected SEMICOLON
ERROR@14309: expected command, found ERROR
ERROR@14341: expected SEMICOLON
ERROR@14341: expected command, found ERROR
ERROR@14413: expected SEMICOLON
ERROR@14413: expected command, found ERROR
ERROR@14445: expected SEMICOLON
ERROR@14445: expected command, found ERROR
ERROR@14626: expected SEMICOLON
ERROR@14626: expected command, found ERROR
ERROR@14634: expected SEMICOLON
ERROR@14634: expected command, found ERROR
ERROR@14684: expected SEMICOLON
ERROR@14684: expected command, found ERROR
ERROR@14692: expected SEMICOLON
ERROR@14692: expected command, found ERROR
ERROR@14836: expected SEMICOLON
ERROR@14836: expected command, found ERROR
ERROR@14845: expected SEMICOLON
ERROR@14845: expected command, found ERROR
ERROR@14877: expected SEMICOLON
ERROR@14877: expected command, found ERROR
ERROR@14973: expected SEMICOLON
ERROR@14973: expected command, found ERROR
ERROR@14984: expected SEMICOLON
ERROR@14984: expected command, found ERROR
ERROR@15163: expected SEMICOLON
ERROR@15163: expected command, found ERROR
ERROR@15182: expected SEMICOLON
ERROR@15182: expected command, found ERROR
ERROR@15191: expected SEMICOLON
ERROR@15191: expected command, found ERROR
ERROR@15283: expected SEMICOLON
ERROR@15283: expected command, found ERROR
ERROR@15308: expected SEMICOLON
ERROR@15308: expected command, found ERROR
ERROR@15317: expected SEMICOLON
ERROR@15317: expected command, found ERROR
ERROR@15358: expected SEMICOLON
ERROR@15358: expected command, found ERROR
ERROR@15379: expected SEMICOLON
ERROR@15379: expected command, found ERROR
ERROR@15402: expected SEMICOLON
ERROR@15402: expected command, found ERROR
ERROR@15491: expected SEMICOLON
ERROR@15491: expected command, found ERROR
ERROR@15499: expected SEMICOLON
ERROR@15499: expected command, found ERROR
ERROR@15514: expected SEMICOLON
ERROR@15514: expected command, found ERROR
ERROR@15541: expected SEMICOLON
ERROR@15541: expected command, found ERROR
ERROR@15634: expected SEMICOLON
ERROR@15634: expected command, found ERROR
ERROR@15719: expected SEMICOLON
ERROR@15719: expected command, found ERROR
ERROR@15893: expected SEMICOLON
ERROR@15893: expected command, found ERROR
ERROR@15902: expected SEMICOLON
ERROR@15902: expected command, found ERROR
ERROR@15937: expected SEMICOLON
ERROR@15937: expected command, found ERROR
ERROR@16012: expected SEMICOLON
ERROR@16012: expected command, found ERROR
ERROR@16023: expected SEMICOLON
ERROR@16023: expected command, found ERROR
ERROR@16059: expected SEMICOLON
ERROR@16059: expected command, found ERROR
ERROR@16188: expected SEMICOLON
ERROR@16188: expected command, found ERROR
ERROR@16207: expected SEMICOLON
ERROR@16207: expected command, found ERROR
ERROR@16243: expected SEMICOLON
ERROR@16243: expected command, found ERROR
ERROR@16316: expected SEMICOLON
ERROR@16316: expected command, found ERROR
ERROR@16337: expected SEMICOLON
ERROR@16337: expected command, found ERROR
ERROR@16373: expected SEMICOLON
ERROR@16373: expected command, found ERROR
ERROR@16514: expected SEMICOLON
ERROR@16514: expected command, found ERROR
ERROR@16550: expected SEMICOLON
ERROR@16550: expected command, found ERROR
ERROR@16707: expected SEMICOLON
ERROR@16707: expected command, found ERROR
ERROR@16743: expected SEMICOLON
ERROR@16743: expected command, found ERROR
ERROR@17026: expected SEMICOLON
ERROR@17026: expected command, found ERROR
ERROR@17062: expected SEMICOLON
ERROR@17062: expected command, found ERROR
ERROR@17071: expected SEMICOLON
ERROR@17071: expected command, found ERROR
ERROR@17107: expected SEMICOLON
ERROR@17107: expected command, found ERROR
ERROR@17259: expected SEMICOLON
ERROR@17259: expected command, found ERROR
ERROR@17295: expected SEMICOLON
ERROR@17295: expected command, found ERROR
ERROR@17306: expected SEMICOLON
ERROR@17306: expected command, found ERROR
ERROR@17342: expected SEMICOLON
ERROR@17342: expected command, found ERROR
